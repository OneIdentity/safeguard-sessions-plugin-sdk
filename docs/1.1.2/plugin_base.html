
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>2. Plugin base functions &#8212; Safeguard for Privileged Sessions Plugin SDK 1.1.2 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.1.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. AA plugin development" href="aa_plugins.html" />
    <link rel="prev" title="1. History of releases" href="history.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="aa_plugins.html" title="3. AA plugin development"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="history.html" title="1. History of releases"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Safeguard for Privileged Sessions Plugin SDK 1.1.2 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-safeguard.sessions.plugin.plugin_base">
<span id="plugin-base-functions"></span><h1>2. Plugin base functions<a class="headerlink" href="#module-safeguard.sessions.plugin.plugin_base" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-safeguard.sessions.plugin.plugin_base"></span><p>The following decorators and the
<a class="reference internal" href="#safeguard.sessions.plugin.plugin_base.PluginBase" title="safeguard.sessions.plugin.plugin_base.PluginBase"><code class="xref py py-class docutils literal"><span class="pre">PluginBase</span></code></a> class may be used in any Plugin SDK based plugin
to get some basic functionality.</p>
<dl class="function">
<dt id="safeguard.sessions.plugin.plugin_base.lazy_property">
<code class="descclassname">safeguard.sessions.plugin.plugin_base.</code><code class="descname">lazy_property</code><span class="sig-paren">(</span><em>factory</em><span class="sig-paren">)</span><a class="headerlink" href="#safeguard.sessions.plugin.plugin_base.lazy_property" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#safeguard.sessions.plugin.plugin_base.lazy_property" title="safeguard.sessions.plugin.plugin_base.lazy_property"><code class="xref py py-meth docutils literal"><span class="pre">&#64;lazy_property</span></code></a> decorator is used to mark attributes that should be only evaluated when
accessed. This is useful when the calculation of the attribute is heavy, but not always necessary.</p>
<p><strong>Usage</strong></p>
<p>To use <code class="docutils literal"><span class="pre">self.foobar</span></code> as a lazy property, simply define it on the Plugin class, and decorate it with
<a class="reference internal" href="#safeguard.sessions.plugin.plugin_base.lazy_property" title="safeguard.sessions.plugin.plugin_base.lazy_property"><code class="xref py py-meth docutils literal"><span class="pre">&#64;lazy_property</span></code></a> decorator:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">safeguard.sessions.plugin</span> <span class="kn">import</span> <span class="n">AAPlugin</span>
<span class="kn">from</span> <span class="nn">safeguard.sessions.plugin.plugin_base</span> <span class="kn">import</span> <span class="n">lazy_property</span>

<span class="k">class</span> <span class="nc">MyPlugin</span><span class="p">(</span><span class="n">AAPlugin</span><span class="p">):</span>
    <span class="nd">@lazy_property</span>
    <span class="k">def</span> <span class="nf">foobar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">calculate_answer</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">do_authenticate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">need_foobar</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">foobar</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="safeguard.sessions.plugin.plugin_base.cookie_property">
<code class="descclassname">safeguard.sessions.plugin.plugin_base.</code><code class="descname">cookie_property</code><span class="sig-paren">(</span><em>factory</em><span class="sig-paren">)</span><a class="headerlink" href="#safeguard.sessions.plugin.plugin_base.cookie_property" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#safeguard.sessions.plugin.plugin_base.cookie_property" title="safeguard.sessions.plugin.plugin_base.cookie_property"><code class="xref py py-meth docutils literal"><span class="pre">&#64;cookie_property</span></code></a> decorator is used to mark attributes that should be passed in the
cookie between invocations of the same plugin. Setting up such property is an easy way to store and retrieve data
in <code class="docutils literal"><span class="pre">self.cookie</span></code>. Similarly to <a class="reference internal" href="#safeguard.sessions.plugin.plugin_base.lazy_property" title="safeguard.sessions.plugin.plugin_base.lazy_property"><code class="xref py py-meth docutils literal"><span class="pre">&#64;lazy_property</span></code></a> attributes, the evaulation of a
<a class="reference internal" href="#safeguard.sessions.plugin.plugin_base.cookie_property" title="safeguard.sessions.plugin.plugin_base.cookie_property"><code class="xref py py-meth docutils literal"><span class="pre">&#64;cookie_property</span></code></a> attribute is also delayed until usage.</p>
<p><strong>Usage</strong></p>
<p>To use <code class="docutils literal"><span class="pre">self.foobar</span></code> as a cookie property, simply define it on the Plugin class, and decorate it with
<a class="reference internal" href="#safeguard.sessions.plugin.plugin_base.cookie_property" title="safeguard.sessions.plugin.plugin_base.cookie_property"><code class="xref py py-meth docutils literal"><span class="pre">&#64;cookie_property</span></code></a> decorator:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">safeguard.sessions.plugin</span> <span class="kn">import</span> <span class="n">AAPlugin</span>
<span class="kn">from</span> <span class="nn">safeguard.sessions.plugin.plugin_base</span> <span class="kn">import</span> <span class="n">cookie_property</span>

<span class="k">class</span> <span class="nc">MyPlugin</span><span class="p">(</span><span class="n">AAPlugin</span><span class="p">):</span>
    <span class="nd">@cookie_property</span>
    <span class="k">def</span> <span class="nf">foobar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">42</span>

    <span class="k">def</span> <span class="nf">do_authenticate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">foobar</span> <span class="o">==</span> <span class="mi">42</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">foobar</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">do_authorize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">foobar</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
<p>The decorator <a class="reference internal" href="#safeguard.sessions.plugin.plugin_base.cookie_property" title="safeguard.sessions.plugin.plugin_base.cookie_property"><code class="xref py py-meth docutils literal"><span class="pre">&#64;cookie_property</span></code></a> together with code in
<code class="xref py py-class docutils literal"><span class="pre">AAPlugin</span></code> will ensure that <code class="docutils literal"><span class="pre">foobar</span></code> is stored and retrieved from
the cookie passed to the plugin.</p>
<p>The initial definition of foobar is 42 in this case, but it can be any function - this function is only called
if foobar was not accessed before. To be more precise foobar is initialized with its factory function if it is
being accessed and it is not present in <code class="docutils literal"><span class="pre">self.cookie</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="safeguard.sessions.plugin.plugin_base.named_cookie_property">
<code class="descclassname">safeguard.sessions.plugin.plugin_base.</code><code class="descname">named_cookie_property</code><span class="sig-paren">(</span><em>key=None</em><span class="sig-paren">)</span><a class="headerlink" href="#safeguard.sessions.plugin.plugin_base.named_cookie_property" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#safeguard.sessions.plugin.plugin_base.named_cookie_property" title="safeguard.sessions.plugin.plugin_base.named_cookie_property"><code class="xref py py-meth docutils literal"><span class="pre">&#64;named_cookie_property</span></code></a> decorator is working similarly to the
<a class="reference internal" href="#safeguard.sessions.plugin.plugin_base.cookie_property" title="safeguard.sessions.plugin.plugin_base.cookie_property"><code class="xref py py-meth docutils literal"><span class="pre">&#64;cookie_property</span></code></a> decorator.
The only difference is you can specify the key you want to save value in the <code class="docutils literal"><span class="pre">self.cookie</span></code>
It is important that you have to call the decorator with the desired key name, see usage.</p>
<p><strong>Usage</strong></p>
<p>To use <code class="docutils literal"><span class="pre">self.my_custom_key</span></code> as a cookie property, simply define it on the Plugin class, and decorate it with
<a class="reference internal" href="#safeguard.sessions.plugin.plugin_base.named_cookie_property" title="safeguard.sessions.plugin.plugin_base.named_cookie_property"><code class="xref py py-meth docutils literal"><span class="pre">&#64;named_cookie_property(key=my_custom_key)</span></code></a> decorator:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">safeguard.sessions.plugin</span> <span class="kn">import</span> <span class="n">AAPlugin</span>
<span class="kn">from</span> <span class="nn">safeguard.sessions.plugin.plugin_base</span> <span class="kn">import</span> <span class="n">named_cookie_property</span>

<span class="k">class</span> <span class="nc">MyPlugin</span><span class="p">(</span><span class="n">AAPlugin</span><span class="p">):</span>
    <span class="nd">@named_cookie_property</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">my_custom_key</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">foobar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">42</span>

    <span class="k">def</span> <span class="nf">do_authenticate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">cookie</span><span class="o">.</span><span class="n">my_custom_key</span> <span class="o">==</span> <span class="mi">42</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="safeguard.sessions.plugin.plugin_base.session_cookie_property">
<code class="descclassname">safeguard.sessions.plugin.plugin_base.</code><code class="descname">session_cookie_property</code><span class="sig-paren">(</span><em>factory</em><span class="sig-paren">)</span><a class="headerlink" href="#safeguard.sessions.plugin.plugin_base.session_cookie_property" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#safeguard.sessions.plugin.plugin_base.session_cookie_property" title="safeguard.sessions.plugin.plugin_base.session_cookie_property"><code class="xref py py-meth docutils literal"><span class="pre">&#64;session_cookie_property</span></code></a> decorator is used to mark attributes that should be
passed in the session cookie between invocations of all plugins relevant to the session.
Setting up such property is an easy way to store and retrieve data in <code class="docutils literal"><span class="pre">self.session_cookie</span></code>.
Similarly to <a class="reference internal" href="#safeguard.sessions.plugin.plugin_base.lazy_property" title="safeguard.sessions.plugin.plugin_base.lazy_property"><code class="xref py py-meth docutils literal"><span class="pre">&#64;lazy_property</span></code></a> attributes, the evaulation of a
<a class="reference internal" href="#safeguard.sessions.plugin.plugin_base.session_cookie_property" title="safeguard.sessions.plugin.plugin_base.session_cookie_property"><code class="xref py py-meth docutils literal"><span class="pre">&#64;session_cookie_property</span></code></a> attribute is also delayed until usage.</p>
<p><strong>Usage</strong></p>
<p>To use <code class="docutils literal"><span class="pre">self.foobar</span></code> as a session cookie property, simply define it on the Plugin class, and decorate it with
<a class="reference internal" href="#safeguard.sessions.plugin.plugin_base.session_cookie_property" title="safeguard.sessions.plugin.plugin_base.session_cookie_property"><code class="xref py py-meth docutils literal"><span class="pre">&#64;session_cookie_property</span></code></a> decorator:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">safeguard.sessions.plugin</span> <span class="kn">import</span> <span class="n">AAPlugin</span>
<span class="kn">from</span> <span class="nn">safeguard.sessions.plugin.plugin_base</span> <span class="kn">import</span> <span class="n">session_cookie_property</span>

<span class="k">class</span> <span class="nc">MyPlugin</span><span class="p">(</span><span class="n">AAPlugin</span><span class="p">):</span>
    <span class="nd">@session_cookie_property</span>
    <span class="k">def</span> <span class="nf">foobar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">42</span>

    <span class="k">def</span> <span class="nf">do_authenticate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">foobar</span> <span class="o">==</span> <span class="mi">42</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">foobar</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">do_authorize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">foobar</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
<p>The decorator <a class="reference internal" href="#safeguard.sessions.plugin.plugin_base.session_cookie_property" title="safeguard.sessions.plugin.plugin_base.session_cookie_property"><code class="xref py py-meth docutils literal"><span class="pre">&#64;session_cookie_property</span></code></a> together with code in
<code class="xref py py-class docutils literal"><span class="pre">AAPlugin</span></code> will ensure that <code class="docutils literal"><span class="pre">foobar</span></code> is stored and retrieved from
the session cookie passed to the plugin.</p>
<p>The initial definition of foobar is 42 in this case, but it can be any function - this function is only called
if foobar was not accessed before. To be more precise foobar is initialized with its factory function if it is
being accessed and it is not present in <code class="docutils literal"><span class="pre">self.session_cookie</span></code>.</p>
</dd></dl>

<dl class="class">
<dt id="safeguard.sessions.plugin.plugin_base.PluginBase">
<em class="property">class </em><code class="descclassname">safeguard.sessions.plugin.plugin_base.</code><code class="descname">PluginBase</code><span class="sig-paren">(</span><em>configuration</em>, <em>defaults=None</em>, <em>logger=None</em><span class="sig-paren">)</span><a class="headerlink" href="#safeguard.sessions.plugin.plugin_base.PluginBase" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#safeguard.sessions.plugin.plugin_base.PluginBase" title="safeguard.sessions.plugin.plugin_base.PluginBase"><code class="xref py py-class docutils literal"><span class="pre">PluginBase</span></code></a> implements:</p>
<ul class="simple">
<li>parsing the textual plugin configuration</li>
<li>setting the log level</li>
<li>setting HTTPS proxy environment variables https_proxy and HTTPS_PROXY</li>
</ul>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table Of Contents</a></h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="history.html">1. History of releases</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Plugin base functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="aa_plugins.html">3. AA plugin development</a></li>
<li class="toctree-l1"><a class="reference internal" href="services.html">4. Plugin-sdk services</a></li>
<li class="toctree-l1"><a class="reference internal" href="fakes.html">5. Fake services for testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">6. About us</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html#contacting-us">7. Contacting us</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html#technical-support-resources">8. Technical support resources</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="history.html"
                        title="previous chapter">1. History of releases</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="aa_plugins.html"
                        title="next chapter">3. AA plugin development</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="aa_plugins.html" title="3. AA plugin development"
             >next</a> |</li>
        <li class="right" >
          <a href="history.html" title="1. History of releases"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Safeguard for Privileged Sessions Plugin SDK 1.1.2 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, One Identity LLC. ALL RIGHTS RESERVED.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.
    </div>
  </body>
</html>